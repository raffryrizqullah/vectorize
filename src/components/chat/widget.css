/* Chat Widget styles adapted from reference/chatbot/style.css */
@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap');

.cw * { box-sizing: border-box; font-family: "Poppins", ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Apple Color Emoji", "Segoe UI Emoji"; }

.cw .chatbot-toggler {
  position: fixed; bottom: 30px; right: 35px; outline: none; border: none; height: 50px; width: 50px;
  display: flex; cursor: pointer; align-items: center; justify-content: center; border-radius: 50%;
  background: var(--color-primary, #0414d7); transition: all 0.2s ease; z-index: 60;
}
.cw.show .chatbot-toggler { transform: rotate(90deg); }
.cw .chatbot-toggler svg { color: #fff; position: absolute; height: 22px; width: 22px; }
.cw.show .chatbot-toggler svg:nth-child(1) { opacity: 0; }
.cw .chatbot-toggler svg:nth-child(2) { opacity: 0; }
.cw.show .chatbot-toggler svg:nth-child(2) { opacity: 1; }

.cw .chatbot { position: fixed; right: 35px; bottom: 90px; width: 420px; background: #fff; border-radius: 15px;
  overflow: hidden; opacity: 0; pointer-events: none; transform: scale(0.5); transform-origin: bottom right;
  box-shadow: 0 0 128px 0 rgba(0,0,0,0.1), 0 32px 64px -48px rgba(0,0,0,0.5); transition: all .1s ease; z-index: 60;
}
.cw.show .chatbot { opacity: 1; pointer-events: auto; transform: scale(1); }

.cw .chatbot header { padding: 16px 0; position: relative; text-align: center; color: #fff; background: var(--color-primary, #0414d7);
  box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
.cw .chatbot header h2 { font-size: 1.05rem; }
.cw .chatbot header button { position: absolute; right: 15px; top: 50%; transform: translateY(-50%); display: none; }

.cw .chatbox { overflow-y: auto; height: 510px; padding: 30px 20px 100px; }
.cw .chatbox .chat { display: flex; list-style: none; }
.cw .chatbox .chat { margin: 10px 0; }
.cw .chatbox .outgoing { justify-content: flex-end; }
.cw .chatbox .incoming span.icon { display: none; }
/* Outgoing (user) bubble applies only to the direct p inside outgoing li */
.cw .chatbox .outgoing > p { white-space: pre-wrap; padding: 10px 12px; border-radius: 20px 20px 6px 20px; max-width: 86%; color: #fff; font-size: 14px; line-height: 1.45; background: var(--color-primary, #0414d7); box-shadow: 0 1px 1.5px rgba(0,0,0,.12); }
/* Remove generic incoming p bubble to avoid nested bubbles; incoming uses .bubble container */
.cw .chatbox .incoming p { background: transparent; color: inherit; padding: 0; border-radius: 0; box-shadow: none; }
.cw .chatbox .chat p.error { color: #721c24; background: #f8d7da; }

/* Bubble container for markdown */
.cw .chatbox .incoming .bubble { position: relative; color: #000; background: #f3f4f6; border: 1px solid #e5e7eb; border-radius: 20px 20px 20px 6px; padding: 10px 12px; max-width: 86%; font-size: 14px; line-height: 1.45; box-shadow: 0 1px 1.5px rgba(17,24,39,.06); }
.cw .chatbox .incoming .bubble::after { content: ""; position: absolute; left: 12px; bottom: -6px; width: 12px; height: 12px; background: inherit; border-left: 1px solid #e5e7eb; border-bottom: 1px solid #e5e7eb; transform: rotate(45deg); border-bottom-left-radius: 3px; box-shadow: 0 1px 1px rgba(17,24,39,.04); }
.cw .md p { margin: 0 0 .28rem; }
.cw .md ul { margin: .25rem 0; padding-left: 1rem; }
.cw .md li { margin: .08rem 0; }
.cw .md a { color: #1d4ed8; text-decoration: underline; word-break: break-word; }
.cw .md code { background: #f3f4f6; padding: 0 .25rem; border-radius: 4px; }
.cw .md pre { background: #0f172a; color: #e5e7eb; padding: .55rem .75rem; border-radius: 8px; overflow: auto; }

.cw .chat-input { display: flex; gap: 5px; position: absolute; bottom: 0; width: 100%; background: #fff; padding: 3px 20px; border-top: 1px solid #ddd; }
.cw .chat-input textarea { height: 55px; width: 100%; border: none; outline: none; resize: none; max-height: 180px; padding: 15px 15px 15px 0; font-size: .95rem; }
.cw .chat-input button.send { align-self: flex-end; color: var(--color-primary, #0414d7); height: 55px; display: flex; align-items: center; visibility: hidden; }
.cw .chat-input textarea:valid ~ button.send { visibility: visible; }

@media (max-width: 490px) {
  .cw .chatbot-toggler { right: 20px; bottom: 20px; }
  .cw .chatbot { right: 0; bottom: 0; height: 100%; width: 100%; border-radius: 0; }
  .cw .chatbox { height: 90%; padding: 25px 15px 100px; }
  .cw .chatbot header button { display: block; }
}
